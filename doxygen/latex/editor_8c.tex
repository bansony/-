\hypertarget{editor_8c}{}\section{Файл editor.\+c}
\label{editor_8c}\index{editor.\+c@{editor.\+c}}
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include \char`\"{}text/text.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}common.\+h\char`\"{}}\newline
\subsection*{Макросы}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{editor_8c_a3e937c42922f7601edb17b747602c471}{M\+A\+X\+L\+I\+NE}}~255
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{editor_8c}{editor.\+c}} -- строковый текстовый редактор \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Функции}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{editor_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}{main}} ()
\end{DoxyCompactItemize}


\subsection{Макросы}
\mbox{\Hypertarget{editor_8c_a3e937c42922f7601edb17b747602c471}\label{editor_8c_a3e937c42922f7601edb17b747602c471}} 
\index{editor.\+c@{editor.\+c}!M\+A\+X\+L\+I\+NE@{M\+A\+X\+L\+I\+NE}}
\index{M\+A\+X\+L\+I\+NE@{M\+A\+X\+L\+I\+NE}!editor.\+c@{editor.\+c}}
\subsubsection{\texorpdfstring{M\+A\+X\+L\+I\+NE}{MAXLINE}}
{\footnotesize\ttfamily \#define M\+A\+X\+L\+I\+NE~255}



\mbox{\hyperlink{editor_8c}{editor.\+c}} -- строковый текстовый редактор 

Copyright (c) 2020, Tikkoeva Anastasia \href{mailto:tikkoeva@petrsu.ru}{\tt tikkoeva@petrsu.\+ru}

This code is licensed under a M\+I\+T-\/style license. 

\subsection{Функции}
\mbox{\Hypertarget{editor_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}\label{editor_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}} 
\index{editor.\+c@{editor.\+c}!main@{main}}
\index{main@{main}!editor.\+c@{editor.\+c}}
\subsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}


\begin{DoxyCode}
19 \{
20     \textcolor{keywordtype}{char} cmdline[\mbox{\hyperlink{editor_8c_a3e937c42922f7601edb17b747602c471}{MAXLINE}} + 1];
21     \textcolor{keywordtype}{char} *cmd;
22     \textcolor{keywordtype}{char} *arg;
23     \textcolor{keywordtype}{char} *arg2;
24     \textcolor{keywordtype}{char} *arg3;
25     
26     \textcolor{comment}{/* Создаем объект для представления текста */}
27     text txt = create\_text();
28 
29     \textcolor{comment}{/* Цикл обработки команд */}
30     \textcolor{keywordflow}{while} (1) \{
31         printf(\textcolor{stringliteral}{"ed > "});
32         
33         \textcolor{comment}{/* Получаем команду */}
34         fgets(cmdline, \mbox{\hyperlink{editor_8c_a3e937c42922f7601edb17b747602c471}{MAXLINE}}, stdin);
35 
36         \textcolor{comment}{/* Извлекаем имя команды */}
37         \textcolor{keywordflow}{if} ((cmd = strtok(cmdline, \textcolor{stringliteral}{" \(\backslash\)n"})) == NULL) \{
38             \textcolor{keywordflow}{continue};
39         \}
40 
41         \textcolor{comment}{/* Распознаем поддерживаемую команду */}
42         
43         \textcolor{comment}{/* Завершаем работу редактора */}
44         \textcolor{keywordflow}{if} (strcmp(cmd, \textcolor{stringliteral}{"quit"}) == 0) \{
45             fprintf(stderr, \textcolor{stringliteral}{"Bye!\(\backslash\)n"});
46             \textcolor{keywordflow}{break};
47         \}
48 
49         \textcolor{comment}{/* Загружаем содержимое файла, заданного параметром */}
50         \textcolor{keywordflow}{if} (strcmp(cmd, \textcolor{stringliteral}{"load"}) == 0) \{
51             \textcolor{keywordflow}{if} ((arg = strtok(NULL, \textcolor{stringliteral}{" \(\backslash\)n"})) == NULL) \{
52                 fprintf(stderr, \textcolor{stringliteral}{"Usage: load filename\(\backslash\)n"});
53             \} \textcolor{keywordflow}{else} \{
54                 \mbox{\hyperlink{common_8h_a5bbc578b96e1803ea1c5083c743cb66e}{load}}(txt, arg);
55             \}
56             \textcolor{keywordflow}{continue};
57         \}
58 
59         \textcolor{keywordflow}{if} (strcmp(cmd, \textcolor{stringliteral}{"m"}) == 0) \{
60         \textcolor{keywordflow}{if} ((arg2 = strtok(NULL, \textcolor{stringliteral}{" \(\backslash\)n"})) == NULL) \{
61         fprintf(stderr, \textcolor{stringliteral}{"Usage: line number\(\backslash\)n"});
62         \}
63         \textcolor{keywordflow}{else} \{
64         \textcolor{keywordflow}{if} ((arg3 = strtok(NULL, \textcolor{stringliteral}{" \(\backslash\)n"})) == NULL) \{
65             fprintf(stderr, \textcolor{stringliteral}{"Usage: cursor number\(\backslash\)n"});
66         \}
67         \textcolor{keywordflow}{else} \{
68             \textcolor{keywordtype}{int} num\_str = atoi(arg2);
69             \textcolor{keywordtype}{int} num\_pos = atoi(arg3);
70 
71             \mbox{\hyperlink{common_8h_a206b521984c57ff9fae1b15166e55a41}{m}}(txt, num\_str, num\_pos);
72         \}
73         \textcolor{keywordflow}{continue};
74         \}
75     \}
76 
77         \textcolor{comment}{/* Выводим текст */}
78         \textcolor{keywordflow}{if} (strcmp(cmd, \textcolor{stringliteral}{"show"}) == 0) \{
79             \mbox{\hyperlink{common_8h_a8c7ccfcd6288c249f9ccaee77c3928a9}{show}}(txt);
80             \textcolor{keywordflow}{continue};
81         \}
82 
83      \textcolor{comment}{/* Выводим текст */}
84         \textcolor{keywordflow}{if} (strcmp(cmd, \textcolor{stringliteral}{"showupper"}) == 0) \{
85             \mbox{\hyperlink{common_8h_a7a43b5e5a9f55665d5a84b2dc7df3d5a}{to\_upper}}(txt);
86             \textcolor{keywordflow}{continue};
87         \}
88 
89     \textcolor{comment}{/* Загружаем содержимое файла, заданного параметром */}
90         \textcolor{keywordflow}{if} (strcmp(cmd, \textcolor{stringliteral}{"save"}) == 0) \{
91             \textcolor{keywordflow}{if} ((arg = strtok(NULL, \textcolor{stringliteral}{" \(\backslash\)n"})) == NULL) \{
92                 fprintf(stderr, \textcolor{stringliteral}{"Usage: load filename\(\backslash\)n"});
93             \} \textcolor{keywordflow}{else} \{
94                 \mbox{\hyperlink{common_8h_a0dc9879063dd3bd3fdfd62ab8a01913d}{save}}(txt, arg);
95             \}
96             \textcolor{keywordflow}{continue};
97         \}
98 
99     \textcolor{comment}{/* Перемещает курсор в начало строки */}
100     \textcolor{keywordflow}{if} (strcmp(cmd, \textcolor{stringliteral}{"mlb"}) == 0) \{
101         \mbox{\hyperlink{common_8h_a455a069aea37ea2b4133350be0ee43cc}{mlb}}(txt);
102         \textcolor{keywordflow}{continue};
103     \}
104     
105     \textcolor{comment}{/* Удаляет первую пустую строку */}
106     \textcolor{keywordflow}{if} (strcmp(cmd, \textcolor{stringliteral}{"r1e"}) == 0) \{
107         \mbox{\hyperlink{common_8h_aafe1ae9643fdea7b9a776c77f2d9c166}{r1e}}(txt);
108         \textcolor{keywordflow}{continue};
109     \}
110         
111     \textcolor{comment}{/* Если команда не известна */}
112     fprintf(stderr, \textcolor{stringliteral}{"Unknown command: %s\(\backslash\)n"}, cmd);
113   
114 
115     \textcolor{keywordflow}{return} 0;
116     \}
117 \}
\end{DoxyCode}
