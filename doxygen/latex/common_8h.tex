\hypertarget{common_8h}{}\section{Файл common.\+h}
\label{common_8h}\index{common.\+h@{common.\+h}}
{\ttfamily \#include \char`\"{}text/text.\+h\char`\"{}}\newline
\subsection*{Макросы}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{common_8h_a86d500a34c624c2cae56bc25a31b12f3}{U\+N\+U\+S\+ED}}(x)~(void)(x)
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{common_8h}{common.\+h}} -- прототипы функций реализации команд редактора \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Функции}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{common_8h_a8c7ccfcd6288c249f9ccaee77c3928a9}{show}} (text txt)
\begin{DoxyCompactList}\small\item\em Выводит содержимое указанного файла на экран \end{DoxyCompactList}\item 
void \mbox{\hyperlink{common_8h_a5bbc578b96e1803ea1c5083c743cb66e}{load}} (text txt, char $\ast$filename)
\begin{DoxyCompactList}\small\item\em Загружает содержимое указанного файла \end{DoxyCompactList}\item 
void \mbox{\hyperlink{common_8h_a0dc9879063dd3bd3fdfd62ab8a01913d}{save}} (text txt, char $\ast$filename)
\begin{DoxyCompactList}\small\item\em Сохраняет содержимое указанного файла \end{DoxyCompactList}\item 
void \mbox{\hyperlink{common_8h_a7a43b5e5a9f55665d5a84b2dc7df3d5a}{to\+\_\+upper}} (text txt)
\begin{DoxyCompactList}\small\item\em Выводит содержимое указанного файла в верхнем регистре \end{DoxyCompactList}\item 
void \mbox{\hyperlink{common_8h_a206b521984c57ff9fae1b15166e55a41}{m}} (text txt, int num\+\_\+str, int num\+\_\+pos)
\begin{DoxyCompactList}\small\item\em Перемещает курсор в заданную позицию \end{DoxyCompactList}\item 
void \mbox{\hyperlink{common_8h_a455a069aea37ea2b4133350be0ee43cc}{mlb}} (text txt)
\begin{DoxyCompactList}\small\item\em Перемещает курсор в начало строки \end{DoxyCompactList}\item 
void \mbox{\hyperlink{common_8h_aafe1ae9643fdea7b9a776c77f2d9c166}{r1e}} (text txt)
\begin{DoxyCompactList}\small\item\em Удаляет первую пустую строку \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Макросы}
\mbox{\Hypertarget{common_8h_a86d500a34c624c2cae56bc25a31b12f3}\label{common_8h_a86d500a34c624c2cae56bc25a31b12f3}} 
\index{common.\+h@{common.\+h}!U\+N\+U\+S\+ED@{U\+N\+U\+S\+ED}}
\index{U\+N\+U\+S\+ED@{U\+N\+U\+S\+ED}!common.\+h@{common.\+h}}
\subsubsection{\texorpdfstring{U\+N\+U\+S\+ED}{UNUSED}}
{\footnotesize\ttfamily \#define U\+N\+U\+S\+ED(\begin{DoxyParamCaption}\item[{}]{x }\end{DoxyParamCaption})~(void)(x)}



\mbox{\hyperlink{common_8h}{common.\+h}} -- прототипы функций реализации команд редактора 

Copyright (c) 2020, Tikkoeva Anastasia \href{mailto:tikkoeva@petrsu.ru}{\tt tikkoeva@petrsu.\+ru}

This code is licensed under a M\+I\+T-\/style license. 

\subsection{Функции}
\mbox{\Hypertarget{common_8h_a5bbc578b96e1803ea1c5083c743cb66e}\label{common_8h_a5bbc578b96e1803ea1c5083c743cb66e}} 
\index{common.\+h@{common.\+h}!load@{load}}
\index{load@{load}!common.\+h@{common.\+h}}
\subsubsection{\texorpdfstring{load()}{load()}}
{\footnotesize\ttfamily void load (\begin{DoxyParamCaption}\item[{text}]{txt,  }\item[{char $\ast$}]{filename }\end{DoxyParamCaption})}



Загружает содержимое указанного файла 

Загружает содержимое указанного файла

Copyright (c) 2017, Alexander Borodin \href{mailto:aborod@petrsu.ru}{\tt aborod@petrsu.\+ru}

This code is licensed under a M\+I\+T-\/style license. Загружает содержимое указанного файла 
\begin{DoxyCode}
17 \{
18     FILE *f;
19 
20     \textcolor{keywordtype}{char} buf[\mbox{\hyperlink{editor_8c_a3e937c42922f7601edb17b747602c471}{MAXLINE}} + 1];
21 
22     \textcolor{comment}{/* Открываем файл для чтения, контролируя ошибки */}
23     \textcolor{keywordflow}{if} ((f = fopen(filename, \textcolor{stringliteral}{"r"})) == NULL) \{
24         printf(\textcolor{stringliteral}{"The file %s cannot be opened\(\backslash\)n"}, filename);
25         \textcolor{keywordflow}{return};
26     \}
27 
28     \textcolor{comment}{/* Удаляем предыдущее содержимое */}
29     remove\_all(txt);
30 
31     \textcolor{comment}{/* Считываем содержимое строка за строкой */}
32     \textcolor{keywordflow}{while} (fgets(buf, \mbox{\hyperlink{editor_8c_a3e937c42922f7601edb17b747602c471}{MAXLINE}}, f)) \{
33         append\_line(txt, buf);
34     \}
35 \}
\end{DoxyCode}
\mbox{\Hypertarget{common_8h_a206b521984c57ff9fae1b15166e55a41}\label{common_8h_a206b521984c57ff9fae1b15166e55a41}} 
\index{common.\+h@{common.\+h}!m@{m}}
\index{m@{m}!common.\+h@{common.\+h}}
\subsubsection{\texorpdfstring{m()}{m()}}
{\footnotesize\ttfamily void m (\begin{DoxyParamCaption}\item[{text}]{txt,  }\item[{int}]{num\+\_\+str,  }\item[{int}]{num\+\_\+pos }\end{DoxyParamCaption})}



Перемещает курсор в заданную позицию 

Перемещает курсор в заданную позицию 
\begin{DoxyCode}
11 \{
12 \textcolor{comment}{/* Проверяем, имеется ли текст */}
13     \textcolor{keywordflow}{if} (txt == NULL || txt->length == 0) \{
14         fprintf(stderr, \textcolor{stringliteral}{"There are already no any lines in the text!\(\backslash\)n"});
15         \textcolor{keywordflow}{return};
16     \} 
17     
18     \textcolor{comment}{/* Текст ненулевой длины должен содержать хотя бы одну строку */}
19     assert(txt->begin != NULL && txt->end != NULL);
20     
21     \textcolor{comment}{/* Стартуем с начальной строки текста */}
22     node *current = txt->begin;
23     
24     \textcolor{comment}{/* Проверяем корректность введёного номера строки */}
25     \textcolor{keywordflow}{if} (num\_str > (\textcolor{keywordtype}{int})txt->length || num\_str <= 0)
26     \{
27         printf(\textcolor{stringliteral}{"This num\_str does not exist. The value is out of the range. \(\backslash\)n"});
28         \textcolor{keywordflow}{return};
29     \}
30     
31     \textcolor{comment}{/* Запоминаем номер строки */}
32     \textcolor{keywordtype}{int} ln = 1;
33     
34     \textcolor{comment}{/* "Бежим", пока не дойдём до нужной строки */}
35     \textcolor{keywordflow}{while} (ln != num\_str)
36     \{
37         ln++;
38         current = current->next;   
39     \}
40 
41     \textcolor{comment}{/* Проверяем корректность введённой позиции курсора */}
42     \textcolor{keywordflow}{if} (num\_pos > (\textcolor{keywordtype}{int})strlen(current->contents) || num\_pos < 0)
43     \{
44         printf(\textcolor{stringliteral}{"This position does not exist. The value is out of the range. \(\backslash\)n"});
45         \textcolor{keywordflow}{return}; 
46     \}
47     \textcolor{keywordflow}{else}
48     \{
49         \textcolor{comment}{/* Переприсваиваем строку, в которой находится курсор */}
50         txt->cursor->line = current;
51         
52         \textcolor{comment}{/* Переприсваиваем позицию, в которой находится курсор */}
53         txt->cursor->position = num\_pos;
54     \}
55 \}
\end{DoxyCode}
\mbox{\Hypertarget{common_8h_a455a069aea37ea2b4133350be0ee43cc}\label{common_8h_a455a069aea37ea2b4133350be0ee43cc}} 
\index{common.\+h@{common.\+h}!mlb@{mlb}}
\index{mlb@{mlb}!common.\+h@{common.\+h}}
\subsubsection{\texorpdfstring{mlb()}{mlb()}}
{\footnotesize\ttfamily void mlb (\begin{DoxyParamCaption}\item[{text}]{txt }\end{DoxyParamCaption})}



Перемещает курсор в начало строки 

Перемещает курсор в начало строки

Copyright (c) 2020, Tikkoeva Anastasia \href{mailto:tikkoeva@petrsu.ru}{\tt tikkoeva@petrsu.\+ru}

This code is licensed under a M\+I\+T-\/style license. Перемещает курсор в начало строки 
\begin{DoxyCode}
23 \{
24     
25     \textcolor{comment}{/* Проверяем, имеется ли текст */}
26     \textcolor{keywordflow}{if} (txt == NULL || txt->length == 0) \{
27     fprintf(stderr, \textcolor{stringliteral}{"There are already no any lines in the text!\(\backslash\)n"});
28     \textcolor{keywordflow}{return};
29     \}
30 
31     \textcolor{comment}{/* Текст ненулевой длины должен содержать хотя бы одну строку */}
32     assert(txt->begin != NULL && txt->end != NULL);
33 
34         \textcolor{comment}{/* Если курсор находится в начале текста, то двинуть его мы не можем*/}
35     \textcolor{keywordflow}{if} (txt->cursor->position == -1) \{
36     printf(\textcolor{stringliteral}{"Another command needed to jump between lines\(\backslash\)n"});
37     \} \textcolor{keywordflow}{else} 
38 
39     txt->cursor->position = 0; \textcolor{comment}{//сдвигаем курсор в начало строки}
40     
41 
42 \}
\end{DoxyCode}
\mbox{\Hypertarget{common_8h_aafe1ae9643fdea7b9a776c77f2d9c166}\label{common_8h_aafe1ae9643fdea7b9a776c77f2d9c166}} 
\index{common.\+h@{common.\+h}!r1e@{r1e}}
\index{r1e@{r1e}!common.\+h@{common.\+h}}
\subsubsection{\texorpdfstring{r1e()}{r1e()}}
{\footnotesize\ttfamily void r1e (\begin{DoxyParamCaption}\item[{text}]{txt }\end{DoxyParamCaption})}



Удаляет первую пустую строку 

\mbox{\Hypertarget{common_8h_a0dc9879063dd3bd3fdfd62ab8a01913d}\label{common_8h_a0dc9879063dd3bd3fdfd62ab8a01913d}} 
\index{common.\+h@{common.\+h}!save@{save}}
\index{save@{save}!common.\+h@{common.\+h}}
\subsubsection{\texorpdfstring{save()}{save()}}
{\footnotesize\ttfamily void save (\begin{DoxyParamCaption}\item[{text}]{txt,  }\item[{char $\ast$}]{filename }\end{DoxyParamCaption})}



Сохраняет содержимое указанного файла 


\begin{DoxyCode}
26 \{
27     FILE *f = fopen(\textcolor{stringliteral}{"f.txt"}, \textcolor{stringliteral}{"a+"});
28 
29     \textcolor{comment}{/* Открываем файл для чтения, контролируя ошибки */}
30     \textcolor{keywordflow}{if} ((f = fopen(filename, \textcolor{stringliteral}{"w"})) == NULL) \{
31         printf(\textcolor{stringliteral}{"The file %s cannot be opened\(\backslash\)n"}, filename);
32     \textcolor{comment}{/* Применяем функцию save\_line к каждой строке текста */}
33     \textcolor{keywordflow}{return};
34     \}
35     process\_forward(txt, save\_line, (\textcolor{keywordtype}{void}*)f);
36     fclose(f);
37     \}
\end{DoxyCode}
\mbox{\Hypertarget{common_8h_a8c7ccfcd6288c249f9ccaee77c3928a9}\label{common_8h_a8c7ccfcd6288c249f9ccaee77c3928a9}} 
\index{common.\+h@{common.\+h}!show@{show}}
\index{show@{show}!common.\+h@{common.\+h}}
\subsubsection{\texorpdfstring{show()}{show()}}
{\footnotesize\ttfamily void show (\begin{DoxyParamCaption}\item[{text}]{txt }\end{DoxyParamCaption})}



Выводит содержимое указанного файла на экран 


\begin{DoxyCode}
21 \{
22     \textcolor{comment}{/* Применяем функцию show\_line к каждой строке текста */}
23     process\_forward(txt, show\_line, NULL);
24 \}
\end{DoxyCode}
\mbox{\Hypertarget{common_8h_a7a43b5e5a9f55665d5a84b2dc7df3d5a}\label{common_8h_a7a43b5e5a9f55665d5a84b2dc7df3d5a}} 
\index{common.\+h@{common.\+h}!to\+\_\+upper@{to\+\_\+upper}}
\index{to\+\_\+upper@{to\+\_\+upper}!common.\+h@{common.\+h}}
\subsubsection{\texorpdfstring{to\+\_\+upper()}{to\_upper()}}
{\footnotesize\ttfamily void to\+\_\+upper (\begin{DoxyParamCaption}\item[{text}]{txt }\end{DoxyParamCaption})}



Выводит содержимое указанного файла в верхнем регистре 

Выводит содержимое указанного файла в верхнем регистре 
\begin{DoxyCode}
23 \{
24     \textcolor{comment}{/* Применяем функцию show\_upper к каждой строке текста */}
25     process\_forward(txt, show\_upper, NULL);
26 \}
\end{DoxyCode}
